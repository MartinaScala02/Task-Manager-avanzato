<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Accordion?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.TitledPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane styleClass="background" stylesheets="@DarkTheme.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="it.unicas.project.template.address.view.MainScreenController">

    <top>
        <HBox alignment="CENTER_LEFT" spacing="20" style="-fx-padding: 15 25;" styleClass="header-bar">
            <Button onAction="#toggleMenu" styleClass="button-icon" text="â˜°" />

            <Label fx:id="welcomeLabel" text="Task Manager">
                <style>
                    -fx-font-family: 'Book Antiqua';
                    -fx-text-fill: #F071A7;
                    -fx-font-size: 32px;
                    -fx-font-weight: bold;
                </style>
            </Label>

            <Region HBox.hgrow="ALWAYS" />

            <HBox alignment="CENTER" spacing="15" styleClass="profile-container">
                <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-background-color: #2F223D; -fx-background-radius: 8; -fx-padding: 8;">
                    <Region prefHeight="32" prefWidth="32" styleClass="profile-placeholder" />
                    <VBox alignment="CENTER_LEFT">
                        <Label fx:id="usernameLabelHeader" style="-fx-font-size: 13px; -fx-font-weight: bold;" styleClass="label-bright" text="Nome Utente" />
                    </VBox>
                </HBox>
                <Button onAction="#handleLogout" styleClass="button-logout" text="Logout" />
            </HBox>
        </HBox>
    </top>

    <left>
        <StackPane alignment="TOP_LEFT">

            <VBox prefWidth="260" spacing="10" styleClass="category-box">
                <style>-fx-padding: 20 10 20 10; -fx-background-color: #1F162A; -fx-border-color: #3A2C49; -fx-border-width: 0 1 0 0;</style>

                <Label style="-fx-opacity: 0.5; -fx-font-size: 11px; -fx-padding: 0 0 0 10;" styleClass="label-bright" text="NAVIGAZIONE" />

                <Accordion>
                    <panes>
                        <TitledPane animated="true" text="ðŸ  Home Tasks">
                            <content>
                                <VBox fx:id="categoryMenuContainer" spacing="5" style="-fx-background-color: #2b2236; -fx-padding: 10;" />
                            </content>
                        </TitledPane>

                        <TitledPane animated="true" text="ðŸ“Š Stato Task">
                            <content>
                                <VBox spacing="8" style="-fx-background-color: #2b2236; -fx-padding: 10;">
                                    <Button maxWidth="Infinity" onAction="#handleFilterToDo" style="-fx-alignment: CENTER_LEFT;" styleClass="button-menu" text="ðŸ“ Da Fare" />
<!--                                    <Button maxWidth="Infinity" onAction="#handleFilterInProgress" style="-fx-alignment: CENTER_LEFT;" styleClass="button-menu" text="â³ In Corso" />-->
                                    <Button maxWidth="Infinity" onAction="#handleFilterCompleted" style="-fx-alignment: CENTER_LEFT;" styleClass="button-menu" text="âœ… Completate" />
                                </VBox>
                            </content>
                        </TitledPane>
                    </panes>
                </Accordion>

                <Separator style="-fx-opacity: 0.1; -fx-padding: 10 0;" />

                <Button maxWidth="Infinity" onAction="#handleStatistics" style="-fx-alignment: CENTER_LEFT; -fx-padding: 10 15;" styleClass="button-menu" text="ðŸ“ˆ Statistica" />
                <Button maxWidth="Infinity" onAction="#handleViewSwitch" style="-fx-alignment: CENTER_LEFT; -fx-padding: 10 15;" styleClass="button-menu" text="ðŸ“… Visualizzazione" />

            </VBox>

            <VBox fx:id="sideMenu" prefWidth="260" spacing="15" styleClass="category-box" translateX="-300">
                <style>-fx-padding: 30 20 20 20; -fx-background-color: #2b2b2b; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.5), 10, 0, 5, 0);</style>

                <Label style="-fx-opacity: 0.5; -fx-font-size: 11px;" styleClass="label-bright" text="MENU UTENTE" />
                <Separator style="-fx-opacity: 0.3;" />

                <VBox spacing="10">
                    <Button maxWidth="Infinity" onAction="#handleProfile" style="-fx-alignment: CENTER_LEFT;" styleClass="button-menu" text="ðŸ‘¤ Il mio Profilo" />
                </VBox>
                <Region VBox.vgrow="ALWAYS" />
                <Button maxWidth="Infinity" onAction="#handleExit" style="-fx-alignment: CENTER_LEFT;" styleClass="button-menu" text="âŒ Esci" />
            </VBox>

        </StackPane>
    </left>

    <center>
        <VBox fx:id="tasksContainer" spacing="0">

            <HBox alignment="CENTER_LEFT" style="-fx-padding: 20 30;">
                <Label styleClass="label-header-list" text="Le mie AttivitÃ ">
                    <font><Font size="26.0" /></font>
                </Label>
                <Region HBox.hgrow="ALWAYS" />
            </HBox>

            <Separator style="-fx-opacity: 0.1;" />

            <VBox spacing="20" style="-fx-padding: 20 30 30 30;" VBox.vgrow="ALWAYS">

                <ListView fx:id="taskListView" style="-fx-background-radius: 8; -fx-border-radius: 8; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 5, 0, 0, 2);" styleClass="list-view" VBox.vgrow="ALWAYS" />

                <VBox spacing="15" style="-fx-background-color: #2A1E35; -fx-padding: 20; -fx-background-radius: 12; -fx-border-color: #3F2E51; -fx-border-radius: 12;" styleClass="quick-add-form" VBox.vgrow="NEVER">

                    <HBox alignment="CENTER_LEFT">
                        <Label style="-fx-font-size: 12px; -fx-font-weight: bold; -fx-opacity: 0.7;" styleClass="label-bright" text="AGGIUNGI NUOVA ATTIVITÃ€" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Button onAction="#handleNewTask" prefHeight="40.0" prefWidth="47.0" style="-fx-font-weight: bold; -fx-cursor: hand;" styleClass="button-green" text="+" />
                    </HBox>

                    <HBox alignment="TOP_LEFT" spacing="15">
                        <VBox spacing="10" HBox.hgrow="ALWAYS">
                            <TextField fx:id="newTaskField" maxWidth="Infinity" promptText="Titolo della task..." style="-fx-font-size: 14px;" />
                            <TextArea fx:id="descriptionArea" maxWidth="Infinity" prefHeight="55" promptText="Dettagli aggiuntivi (opzionale)" wrapText="true" />
                        </VBox>

                        <VBox maxWidth="280" minWidth="220" spacing="10">
                            <ComboBox fx:id="categoryComboBox" prefHeight="54.0" prefWidth="Infinity" promptText="Categoria" HBox.hgrow="ALWAYS" />
                            <HBox spacing="10">
                                <DatePicker fx:id="dueDateField" maxHeight="1.7976931348623157E308" minHeight="-Infinity" prefWidth="0.0" promptText="Scadenza" HBox.hgrow="ALWAYS" />
                                <ComboBox fx:id="priorityComboBox" prefWidth="0" promptText="PrioritÃ " HBox.hgrow="ALWAYS" />
                            </HBox>
                        </VBox>
                    </HBox>

                </VBox>

            </VBox>
        </VBox>
    </center>

</BorderPane>